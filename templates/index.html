<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Emergency Vehicle Route Planner</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <!-- Leaflet CSS -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
      integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY="
      crossorigin=""
    />

</head>
<body>
<div class="app-container">

    <header class="app-header">
        <h1>Emergency Vehicle Route Planner</h1>
        <p>Compare independent A*, cooperative planning, and D*-Lite on real roads.</p>
    </header>

    <!-- Mode toggle -->
    <div class="mode-toggle">
        <button id="mode-click" class="mode-btn active">ğŸ“ Click on Map</button>
        <button id="mode-coords" class="mode-btn">ğŸ“Œ Enter Coordinates</button>
    </div>

    <!-- Instructions -->
    <div id="instruction" class="instruction-bar">
        Click Mode: First choose number of vehicles, then click on the map to set
        their starting locations and the accident location.
    </div>

    <div class="main-layout">
        <!-- Left: map and controls -->
        <section class="left-panel">
            <div class="controls-card">

                <div class="row">
                    <label>Number of vehicles:</label>
                    <input type="number" id="num-vehicles" min="1" value="3">
                    <button id="apply-vehicles" class="small-btn">Apply</button>
                </div>

                <div id="vehicle-name-container" class="vehicle-list">
                    <!-- vehicle name inputs generated by JS -->
                </div>

                <!-- Coordinate mode inputs -->
                <div id="coord-mode-panel" class="coord-panel hidden">
                    <h3>Coordinate Mode</h3>
                    <div id="coord-vehicles">
                        <!-- per-vehicle lat/lon fields -->
                    </div>
                    <div class="coord-accident">
                        <h4>Accident Location</h4>
                        <div class="coord-row">
                            <label>Lat</label>
                            <input type="number" id="acc-lat" step="0.000001">
                            <label>Lon</label>
                            <input type="number" id="acc-lon" step="0.000001">
                        </div>
                    </div>
                </div>

                <!-- Action buttons -->
                <div class="action-row">
                    <button id="run-btn" class="run-btn" disabled>ğŸš€ Run All Algorithms</button>
                    <button id="reset-btn" class="reset-btn">ğŸ” Reset</button>
                </div>
            </div>

            <div id="map" class="map-container"></div>
        </section>

        <!-- Right: results -->
        <section class="right-panel">
            <h2>ğŸ“Š Algorithm Results</h2>
            <div id="status-message" class="status-message">
                Set all locations and click "Run All Algorithms".
            </div>

            <div id="results-panel" class="results-panel hidden">
                <!-- Filled by JS -->
            </div>

            <div id="visualize-container" class="visualize-container hidden">
                <a href="/map" target="_blank">
                    <button class="visualize-btn">ğŸ—ºï¸ Open Visualization Map</button>
                </a>
            </div>
        </section>
    </div>
</div>

<!-- Leaflet JS -->
<script
  src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
  integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
  crossorigin=""
></script>

<script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>
